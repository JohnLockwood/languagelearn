# https://taskfile.dev

version: '3'

vars:
  GREETING: Hello, World!

tasks:
  default:
    cmds:
      - echo "{{.GREETING}}"
    silent: true

  create_table:
    cmds:
      - |
        aws dynamodb create-table --table-name LessonItems --attribute-definitions AttributeName=id,AttributeType=S \
        --billing-mode PAY_PER_REQUEST --key-schema AttributeName=id,KeyType=HASH --endpoint-url http://127.0.0.1:8000

  put_item:
    cmds:
      - |
        sam local invoke putItemFunction --event events/event-post-item.json \
        --docker-network backend --skip-pull-image --profile default --env-vars env.json

  get_all_items:
    cmds:
      - |
        sam local invoke getAllItemsFunction --event events/event-get-all-items.json \
        --docker-network backend --skip-pull-image --profile default --env-vars env.json
  hello_lambda:
    cmds:
      - |
        sam local invoke helloWorldFunction --event events/event-hello-world.json \
         --docker-network backend --skip-pull-image --profile default --env-vars env.json

#  get_rows:
#
#    cmds: sam local start-api -t template.yml --docker-network abp-sam-backend --skip-pull-image --profile default --parameter-overrides
#      'ParameterKey=StageName,ParameterValue=local ParameterKey=DDBTableName,ParameterValue=local-SingleTable'
